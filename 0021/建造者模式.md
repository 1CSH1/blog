个人博客原文：
[创建型模式：建造者模式](http://www.liebrother.com/builder-pattern)

![景](http://www.liebrother.com/upload/ac9ad6d82ea147b5badb22f2321d5090_0021_01.jpg) 


> 五大创建型模式之四：建造者模式。

## 简介

**姓名** ：建造者模式

**英文名** ：Builder Pattern

**价值观** ：

**个人介绍** ：

Separate the construction of a complex object from its representation so that the same construction process can create different representations.
将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。
（来自《设计模式之禅》）

今天给大家介绍的是建造者模式。思考了一天要用什么例子好，想来想去，可以延续上一篇 [抽象工厂模式](https://mp.weixin.qq.com/s/zGDzkvftexHzJqaAL5oSAQ) 的故事，在决定之前一方面担心读者会因为同一个故事而把这 2 个设计模式搞混了，一方面又觉得通过这同个故事情节可以让读者清晰的了解 2 个设计模式的区别，最终还是决定用同样的故事情节，我也会努力让大家不搞混哈。

## 你要的故事

我们的故事从这里开始。汽车在组装过程中，会涉及到安装很多零件，包括轮胎、方向盘、镜子等等，在现实生活中，这些都是流水线化的，我们在这里脑洞打开，假设宝马和奔驰这 2 家店安装着 3 个零件的步骤是不一样的，宝马车的安装步骤是：安装镜子、方向盘、轮胎，奔驰车的安装步骤是：安装轮胎、方向盘、镜子。有人一听到这里，好，立马写下下面的代码。

``` java
public class NoBuilderTest {

    public static void main(String[] args) {
        BMWCar bmwCar = new BMWCar();
        // 安装镜子
        bmwCar.installMirror();
        // 安装方向盘
        bmwCar.installSteeringWheel();
        // 安装轮胎
        bmwCar.installWheel();

        MercedesCar mercedesCar = new MercedesCar();
        // 安装轮胎
        mercedesCar.installWheel();
        // 安装方向盘
        mercedesCar.installSteeringWheel();
        // 安装镜子
        mercedesCar.installMirror();
    }

}

/**
 * 汽车
 */
abstract class Car {

    abstract void installWheel();

    abstract void installSteeringWheel();

    abstract void installMirror();

}

/**
 * 宝马汽车
 */
class BMWCar extends Car {

    @Override
    public void installWheel() {
        System.out.println("宝马车安装轮胎");
    }

    @Override
    public void installSteeringWheel() {
        System.out.println("宝马车安装反向盘");
    }

    @Override
    public void installMirror() {
        System.out.println("宝马车安装镜子");
    }
}

/**
 * 奔驰汽车
 */
class MercedesCar extends Car {
    @Override
    public void installWheel() {
        System.out.println("奔驰车安装轮胎");
    }

    @Override
    public void installSteeringWheel() {
        System.out.println("奔驰车安装反向盘");
    }

    @Override
    public void installMirror() {
        System.out.println("奔驰车安装镜子");
    }
}
```


``` java
package com.liebrother.designpatterns.builder;

public class BuilderTest {

    public static void main(String[] args) {
        Director director = new Director();
        director.buildBMWCar();
        director.buildMercedesCar();
    }

}

/**
 * 汽车建造者
 */
interface CarBuilder {

    void buildCar();

    Car getCar();

}

/**
 * 宝马汽车建造者
 */
class BMWCarBuilder implements CarBuilder {

    private BMWCar car = new BMWCar();

    @Override
    public void buildCar() {
        // 安装镜子
        car.installMirror();
        // 安装方向盘
        car.installSteeringWheel();
        // 安装轮胎
        car.installWheel();
    }

    @Override
    public Car getCar() {
        return car;
    }
}

/**
 * 奔驰汽车建造者
 */
class MercedesCarBuilder implements CarBuilder {

    private MercedesCar car = new MercedesCar();

    @Override
    public void buildCar() {
        // 安装轮胎
        car.installWheel();
        // 安装方向盘
        car.installSteeringWheel();
        // 安装镜子
        car.installMirror();
    }

    @Override
    public Car getCar() {
        return car;
    }
}

/**
 * 生产方
 */
class Director {
    private BMWCarBuilder bmwCarBuilder = new BMWCarBuilder();
    private MercedesCarBuilder mercedesCarBuilder = new MercedesCarBuilder();

    /**
     * 生产宝马
     */
    public BMWCar buildBMWCar() {
        bmwCarBuilder.buildCar();
        return (BMWCar) bmwCarBuilder.getCar();
    }

    /**
     * 生产奔驰
     */
    public MercedesCar buildMercedesCar() {
        mercedesCarBuilder.buildCar();
        return (MercedesCar) mercedesCarBuilder.getCar();
    }

}
```

代码：

[builder](https://github.com/1CSH1/DesignPatterns/blob/master/src/com/liebrother/designpatterns/builder/)


## 总结



参考资料：《大话设计模式》、《Java设计模式》、《设计模式之禅》、《研磨设计模式》、《Head First 设计模式》

推荐阅读：
[创建型模式：单例模式](https://mp.weixin.qq.com/s/aJSf8yESPeex78S6W0FWWw)
[创建型模式：工厂方法](https://mp.weixin.qq.com/s/12fLnRxKCYABSItkKvU8Fw)
[创建型模式：抽象工厂](https://mp.weixin.qq.com/s/zGDzkvftexHzJqaAL5oSAQ)

希望文章对您有所帮助，设计模式系列会持续更新，感兴趣的同学可以关注公众号，第一时间获取文章推送阅读，也可以一起交流，交个朋友。

[公众号之设计模式系列文章](https://mp.weixin.qq.com/mp/homepage?__biz=MzIxMzgwMTAyMg==&hid=2&sn=c97b64288d92312f57d3c8298f8d8888)

![公众号](http://www.liebrother.com/upload/df81ac224abe46b38131a0e78f4dcf9c_wechat.jpg)

